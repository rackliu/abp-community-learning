# åœ–è¡¨æ¸²æŸ“èªªæ˜

## ğŸ“Š å•é¡Œèªªæ˜

**Pandoc é è¨­ç„¡æ³•ç›´æ¥æ¸²æŸ“ Mermaid å’Œ PlantUML åœ–è¡¨**ã€‚åœ¨è½‰æ›ç‚º PDF æ™‚ï¼Œé€™äº›åœ–è¡¨ä»£ç¢¼æœƒè¢«ç•¶ä½œæ™®é€šçš„ç¨‹å¼ç¢¼å€å¡Šé¡¯ç¤ºã€‚

## âœ… è§£æ±ºæ–¹æ¡ˆç¸½è¦½

| æ–¹æ¡ˆ                            | Mermaid æ”¯æ´ | PlantUML æ”¯æ´ | é›£åº¦ | æ¨è–¦åº¦     |
| ------------------------------- | ------------ | ------------- | ---- | ---------- |
| **æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ mermaid-filter** | âœ… è‡ªå‹•æ¸²æŸ“  | âŒ éœ€é¡å¤–é…ç½® | ä¸­   | â­â­â­â­â­ |
| **æ–¹æ¡ˆ 2ï¼šé å…ˆç”Ÿæˆåœ–ç‰‡**        | âœ… æ‰‹å‹•      | âœ… æ‰‹å‹•       | ä½   | â­â­â­     |
| **æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ç·šä¸Šå·¥å…·**        | âœ… æ‰‹å‹•      | âœ… æ‰‹å‹•       | ä½   | â­â­       |

---

## ğŸ¯ æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ mermaid-filterï¼ˆæ¨è–¦ï¼‰

### å®‰è£æ­¥é©Ÿ

```powershell
# 1. å®‰è£ Node.jsï¼ˆå¦‚æœå°šæœªå®‰è£ï¼‰
choco install nodejs

# 2. å®‰è£ Mermaid CLI
npm install -g @mermaid-js/mermaid-cli

# 3. å®‰è£ mermaid-filter
npm install -g mermaid-filter

# 4. é©—è­‰å®‰è£
mmdc --version
```

### ä½¿ç”¨æ–¹æ³•

åŸ·è¡Œæ”¯æ´åœ–è¡¨æ¸²æŸ“çš„è…³æœ¬ï¼š

```powershell
.\build-pdf-advanced.ps1
```

### å·¥ä½œåŸç†

```
Markdown åŸå§‹æª”
    â†“
Pandoc è®€å–
    â†“
mermaid-filter æ””æˆª mermaid ç¨‹å¼ç¢¼å€å¡Š
    â†“
å‘¼å« mmdc (Mermaid CLI) ç”Ÿæˆ PNG åœ–ç‰‡
    â†“
å°‡åœ–ç‰‡åµŒå…¥ PDF
    â†“
æœ€çµ‚ PDF è¼¸å‡ºï¼ˆå«åœ–è¡¨ï¼‰
```

### æ”¯æ´çš„ Mermaid åœ–è¡¨é¡å‹

- âœ… æµç¨‹åœ– (Flowchart)
- âœ… åºåˆ—åœ– (Sequence Diagram)
- âœ… é¡åˆ¥åœ– (Class Diagram)
- âœ… ç‹€æ…‹åœ– (State Diagram)
- âœ… å¯¦é«”é—œä¿‚åœ– (ER Diagram)
- âœ… ç”˜ç‰¹åœ– (Gantt Chart)
- âœ… åœ“é¤…åœ– (Pie Chart)

### ç¯„ä¾‹

**Markdown åŸå§‹ç¢¼ï¼š**

````markdown
```mermaid
graph TD
    A[é–‹å§‹] --> B{æ¢ä»¶åˆ¤æ–·}
    B -->|æ˜¯| C[åŸ·è¡Œ A]
    B -->|å¦| D[åŸ·è¡Œ B]
    C --> E[çµæŸ]
    D --> E
```
````

**PDF ä¸­é¡¯ç¤ºï¼š** å¯¦éš›çš„æµç¨‹åœ–åœ–ç‰‡ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰

---

## ğŸ”§ æ–¹æ¡ˆ 2ï¼šé å…ˆç”Ÿæˆåœ–ç‰‡

é©ç”¨æ–¼ PlantUML æˆ–éœ€è¦å®Œå…¨æ§åˆ¶åœ–ç‰‡å“è³ªçš„æƒ…æ³ã€‚

### PlantUML åœ–ç‰‡ç”Ÿæˆ

```powershell
# 1. å®‰è£ Java
choco install openjdk

# 2. ä¸‹è¼‰ PlantUML
# è¨ªå• https://plantuml.com/download
# ä¸‹è¼‰ plantuml.jar åˆ°å°ˆæ¡ˆç›®éŒ„

# 3. ç”Ÿæˆåœ–ç‰‡
java -jar plantuml.jar your-diagram.puml

# é€™æœƒç”Ÿæˆ your-diagram.png
```

### åœ¨ Markdown ä¸­å¼•ç”¨

````markdown
<!-- åŸæœ¬çš„ PlantUML ä»£ç¢¼ -->

```plantuml
@startuml
Alice -> Bob: Hello
Bob -> Alice: Hi
@enduml
```
````

<!-- æ”¹ç‚ºå¼•ç”¨ç”Ÿæˆçš„åœ–ç‰‡ -->

```markdown
![åºåˆ—åœ–](diagrams/sequence.png)
```

### æ‰¹é‡è™•ç†è…³æœ¬

å‰µå»º `generate-diagrams.ps1`ï¼š

```powershell
# æ‰¹é‡ç”Ÿæˆæ‰€æœ‰ PlantUML åœ–è¡¨
$pumlFiles = Get-ChildItem -Path "diagrams" -Filter "*.puml" -Recurse

foreach ($file in $pumlFiles) {
    Write-Host "ç”Ÿæˆåœ–è¡¨: $($file.Name)" -ForegroundColor Cyan
    java -jar plantuml.jar $file.FullName
}

Write-Host "âœ… æ‰€æœ‰åœ–è¡¨å·²ç”Ÿæˆ" -ForegroundColor Green
```

---

## ğŸŒ æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ç·šä¸Šå·¥å…·

### Mermaid Live Editor

1. è¨ªå• https://mermaid.live/
2. è²¼ä¸Š Mermaid ä»£ç¢¼
3. é»æ“Šã€ŒDownload PNGã€
4. åœ¨ Markdown ä¸­å¼•ç”¨ä¸‹è¼‰çš„åœ–ç‰‡

### PlantUML Online Server

1. è¨ªå• https://www.plantuml.com/plantuml/
2. è²¼ä¸Š PlantUML ä»£ç¢¼
3. ä¸‹è¼‰ç”Ÿæˆçš„åœ–ç‰‡
4. åœ¨ Markdown ä¸­å¼•ç”¨

---

## âš ï¸ å¸¸è¦‹å•é¡Œ

### å•é¡Œ 1ï¼šmermaid-filter æ‰¾ä¸åˆ°

**éŒ¯èª¤è¨Šæ¯ï¼š**

```
Error: pandoc filter mermaid-filter not found
```

**è§£æ±ºæ–¹æ¡ˆï¼š**

```powershell
# é‡æ–°å®‰è£
npm uninstall -g mermaid-filter
npm install -g mermaid-filter

# ç¢ºèªå®‰è£ä½ç½®
npm list -g mermaid-filter
```

### å•é¡Œ 2ï¼šMermaid åœ–è¡¨æ¸²æŸ“å¤±æ•—

**éŒ¯èª¤è¨Šæ¯ï¼š**

```
Error: Cannot find module 'puppeteer'
```

**è§£æ±ºæ–¹æ¡ˆï¼š**

```powershell
# é‡æ–°å®‰è£ mermaid-cli
npm uninstall -g @mermaid-js/mermaid-cli
npm cache clean --force
npm install -g @mermaid-js/mermaid-cli
```

### å•é¡Œ 3ï¼šåœ–è¡¨é¡¯ç¤ºç‚ºç¨‹å¼ç¢¼

**åŸå› ï¼š** mermaid-filter æœªæ­£ç¢ºåŸ·è¡Œ

**è§£æ±ºæ–¹æ¡ˆï¼š**

1. ç¢ºèª Node.js å·²å®‰è£ï¼š`node --version`
2. ç¢ºèª mmdc å·²å®‰è£ï¼š`mmdc --version`
3. ç¢ºèª mermaid-filter å·²å®‰è£ï¼š`npm list -g mermaid-filter`
4. æª¢æŸ¥ Pandoc å‘½ä»¤æ˜¯å¦åŒ…å« `--filter mermaid-filter`

### å•é¡Œ 4ï¼šPlantUML ç„¡æ³•ç”Ÿæˆåœ–ç‰‡

**è§£æ±ºæ–¹æ¡ˆï¼š**

```powershell
# ç¢ºèª Java å·²å®‰è£
java --version

# æ¸¬è©¦ PlantUML
java -jar plantuml.jar -testdot

# å¦‚æœå¤±æ•—ï¼Œå®‰è£ Graphviz
choco install graphviz
```

---

## ğŸ“Š æ•ˆèƒ½è€ƒé‡

### Mermaid åœ–è¡¨æ¸²æŸ“æ™‚é–“

- æ¯å€‹åœ–è¡¨ç´„éœ€ 2-5 ç§’
- 25 å€‹ç« ç¯€ï¼Œå‡è¨­æœ‰ 50 å€‹åœ–è¡¨
- é è¨ˆé¡å¤–æ™‚é–“ï¼š5-10 åˆ†é˜

### å„ªåŒ–å»ºè­°

1. **ä½¿ç”¨å¿«å–**ï¼šå·²ç”Ÿæˆçš„åœ–ç‰‡æœƒè¢«å¿«å–ï¼Œé‡è¤‡åŸ·è¡Œæœƒæ›´å¿«
2. **åˆ†æ‰¹è™•ç†**ï¼šå…ˆç”Ÿæˆéƒ¨åˆ†ç« ç¯€æ¸¬è©¦
3. **é å…ˆç”Ÿæˆ**ï¼šå°æ–¼è¤‡é›œåœ–è¡¨ï¼Œè€ƒæ…®é å…ˆç”Ÿæˆåœ–ç‰‡

---

## ğŸ¨ åœ–è¡¨æ¨£å¼è‡ªè¨‚

### Mermaid ä¸»é¡Œ

åœ¨ Markdown ä¸­æŒ‡å®šä¸»é¡Œï¼š

````markdown
```mermaid
%%{init: {'theme':'dark'}}%%
graph TD
    A --> B
```
````

å¯ç”¨ä¸»é¡Œï¼š

- `default`
- `dark`
- `forest`
- `neutral`

### PlantUML æ¨£å¼

```plantuml
@startuml
skinparam backgroundColor #EEEBDC
skinparam handwritten true

Alice -> Bob: Hello
@enduml
```

---

## ğŸ“ æœ€ä½³å¯¦è¸

### 1. æ··åˆä½¿ç”¨ç­–ç•¥

- **ç°¡å–®åœ–è¡¨**ï¼šä½¿ç”¨ Mermaid + mermaid-filterï¼ˆè‡ªå‹•åŒ–ï¼‰
- **è¤‡é›œåœ–è¡¨**ï¼šä½¿ç”¨ PlantUML + é å…ˆç”Ÿæˆï¼ˆå“è³ªæ§åˆ¶ï¼‰

### 2. åœ–ç‰‡ç®¡ç†

```
project/
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ ch01.md
â”‚   â””â”€â”€ diagrams/          # é å…ˆç”Ÿæˆçš„åœ–ç‰‡
â”‚       â”œâ”€â”€ ch01-arch.png
â”‚       â””â”€â”€ ch02-flow.png
â”œâ”€â”€ build-pdf-advanced.ps1  # æ”¯æ´ Mermaid è‡ªå‹•æ¸²æŸ“
â””â”€â”€ generate-diagrams.ps1   # æ‰¹é‡ç”Ÿæˆ PlantUML
```

### 3. ç‰ˆæœ¬æ§åˆ¶

- âœ… æäº¤ `.puml` å’Œ `.mmd` åŸå§‹æª”
- âœ… æäº¤é å…ˆç”Ÿæˆçš„ PNG åœ–ç‰‡
- âŒ ä¸æäº¤è‡¨æ™‚ç”Ÿæˆçš„åœ–ç‰‡

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å®Œæ•´å·¥ä½œæµç¨‹

```powershell
# 1. å®‰è£æ‰€æœ‰å¿…è¦å·¥å…·
choco install nodejs openjdk
npm install -g @mermaid-js/mermaid-cli mermaid-filter

# 2. ï¼ˆå¯é¸ï¼‰ç”Ÿæˆ PlantUML åœ–è¡¨
.\generate-diagrams.ps1

# 3. ç”Ÿæˆ PDFï¼ˆæ”¯æ´ Mermaid è‡ªå‹•æ¸²æŸ“ï¼‰
.\build-pdf-advanced.ps1

# 4. æª¢æŸ¥è¼¸å‡º
# abp-community-learning-kit_å«åœ–è¡¨.pdf
```

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025 å¹´ 11 æœˆ 20 æ—¥
